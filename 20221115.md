# 1. Given the root of a complete binary tree, return the number of the nodes in the tree https://leetcode.com/problems/count-complete-tree-nodes/

Solution

- For a complete binary tree, if the depth of leftmost leaf equals to the depth of rightmost leaf, then the binary tree is a perfect tree (who has 2^n-1 nodes). Recursively check whether every subtree meets the above condition : O((logn)^2) & S(logn)

Code

- Java

```java

```

- Python

```python
class Solution:
    def countNodes(self, root: Optional[TreeNode]) -> int:
        if root is None:
            return 0
        leftHeight, rightHeight = self.countHeightLeft(root), self.countHeightRight(root)
        if leftHeight == rightHeight:
            return (1 << rightHeight) - 1
        else:
            return self.countNodes(root.left) + self.countNodes(root.right) + 1

    def countHeightLeft(self, root):
        height = 0
        cur = root
        while cur is not None:
            cur = cur.left
            height += 1
        return height
    
    def countHeightRight(self, root):
        height = 0
        cur = root
        while cur is not None:
            cur = cur.right
            height += 1
        return height
```